<a class="i-button arrow button js-requires-selected-row disabled" data-toggle="dropdown">
     {%- trans %}CERN access control{% endtrans -%}
</a>
<ul class="dropdown">
    <li>
        <a href="#" class="icon-checkmark js-requires-selected-row disabled" id="grant-cern-access-button"
           data-method="POST"
           data-href="{{ url_for_plugin('cern_access.registrations_grant_cern_access', regform) }}"
           data-title="{% trans %}Grant CERN site access{% endtrans %}"
           data-params-selector="#registration-list tr input[type=checkbox]:checked"
           data-method="POST"
           data-ajax-dialog>
            {%- trans %}Grant access{% endtrans -%}
        </a>
    </li>
    <li>
        <a href="#" class="icon-close js-requires-selected-row disabled js-modify-status"
           data-href="{{ url_for_plugin('cern_access.registrations_revoke_cern_access', regform) }}"
           data-method="POST"
           data-flag="0">
            {%- trans %}Revoke access{% endtrans -%}
        </a>
    </li>
</ul>

<script>
    (function() {
        'use strict';
        $('#grant-cern-access-button').on('ajaxDialog:closed', function(evt, data) {
            if (data) {
                $('.list-content').html(data.html);
                handleSelectedRowHighlight(true);
                setupTableSorter();
            }
        });
    })();
</script>
