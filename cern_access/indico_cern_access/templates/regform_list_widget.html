{% extends 'forms/base_widget.html' %}
{% block html %}
    <input type="hidden" id="{{ field.id }}" name="{{ field.name }}" value="{{ field._value() | tojson | forceescape }}">
    <div class="page-content">
        <table id="regforms-list" class="i-table-widget">
            <thead>
                <tr>
                    <th>{% trans %}Registration form {% endtrans %}</th>
                    <th>{% trans %}Allow unpaid{% endtrans %}</th>
                    <th>{% trans %}Include{% endtrans %}</th>
                    <th>{% trans %}Status{% endtrans %}</th>
                </tr>
            </thead>
            <tbody>
                 {% for regform in field.event_regforms %}
                 {% set is_requested = regform.cern_access_request and regform.cern_access_request.is_active %}
                    <tr>
                        <td> {{ regform.title }}</td>
                            <td>
                                {% if regform.base_price %}
                                    <input type="checkbox" id="allow_unpaid_{{ regform.id }}" name="allow_unpaid" value="{{ regform.id }}"
                                        {% if is_requested and regform.cern_access_request.allow_unpaid %} checked
                                        {% elif not is_requested %} disabled {% endif %}><br>
                                {% else %}
                                    <input type="checkbox" title="This registration form doesn't require payment" disabled><br>
                                {% endif %}
                            </td>
                        <td><label class="switch">
                        <input type="checkbox" class="switch-input" id="{{ regform.id }}" name="{{ regform.title }}" value="{{ regform.id }}"
                               {% if is_requested %} checked {% endif %}>
                        <span class="switch-label" data-on="Yes" data-off="No"></span>
                        <span class="switch-handle"></span>
                    </label></td>
                        <td></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
